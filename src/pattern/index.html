
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../mv3/">
      
      
        <link rel="next" href="../library/">
      
      
      <link rel="icon" href="../../assets/retrotxt_128.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Program patterns - RetroTxt</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"IBM Plex Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#program-patterns" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="RetroTxt" class="md-header__button md-logo" aria-label="RetroTxt" data-md-component="logo">
      
  <img src="../../assets/retrotxt_128.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RetroTxt
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Program patterns
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/bengarrett/RetroTxt" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="RetroTxt" class="md-nav__button md-logo" aria-label="RetroTxt" data-md-component="logo">
      
  <img src="../../assets/retrotxt_128.svg" alt="logo">

    </a>
    RetroTxt
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bengarrett/RetroTxt" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/first/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    First-time usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/secure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Secure RetroTxt
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/local/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    View local files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/websites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Suggestions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/garbled/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Garbled text
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/font_size/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Font size
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/pref/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Font rendering
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/omnibar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commands
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../limitations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Limitations
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Supported standards
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Supported standards
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/controls/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control sequences
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/cp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Codepages
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/ansi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ANSI / ECMA-48
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/ansi_sys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ANSI.SYS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/bbs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BBS colors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/misc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Non-standard
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/sauce/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SAUCE (metadata)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Source code
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Source code
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mv3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manifest V3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Program patterns
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Program patterns
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#code-encoding" class="md-nav__link">
    <span class="md-ellipsis">
      Code encoding
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parsing-escape-codes-complexity" class="md-nav__link">
    <span class="md-ellipsis">
      Parsing escape codes complexity
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conflicts-ascii-and-ibm-code-pages" class="md-nav__link">
    <span class="md-ellipsis">
      Conflicts, ASCII and IBM code pages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#switch-conditionals-and-a-lot-of-loops" class="md-nav__link">
    <span class="md-ellipsis">
      Switch conditionals and a lot of loops
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#text-characters-and-pattern-matching" class="md-nav__link">
    <span class="md-ellipsis">
      Text characters and pattern matching
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#there-are-no-magic-numbers" class="md-nav__link">
    <span class="md-ellipsis">
      There are no magic numbers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#idiomatic-text-elements" class="md-nav__link">
    <span class="md-ellipsis">
      Idiomatic text elements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-preference-for-reference-over-of-primitive-types" class="md-nav__link">
    <span class="md-ellipsis">
      The preference for reference over of primitive types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objects-vs-arrays" class="md-nav__link">
    <span class="md-ellipsis">
      Objects vs arrays
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#do-not-combine-reference-types-with-primitive-types-in-large-sets" class="md-nav__link">
    <span class="md-ellipsis">
      Do not combine reference types with primitive types in large sets
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../library/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Libraries in use
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../standard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Standards
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Files & directories
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../font/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fonts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install & usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../build/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tips for building
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changes
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Hosting on the web
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Hosting on the web
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../host/caddy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Caddy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../host/nginx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nginx
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Policies
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Policies
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../privacy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Privacy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/bengarrett/RetroTxt/blob/main/.github/SECURITY.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🔗 Security
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/bengarrett/RetroTxt/blob/main/.github/CODE_OF_CONDUCT.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🔗 Code of conduct
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/bengarrett/RetroTxt/blob/main/.github/CONTRIBUTING.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🔗 Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/bengarrett/RetroTxt/blob/main/LICENSE" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🔗 License
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#code-encoding" class="md-nav__link">
    <span class="md-ellipsis">
      Code encoding
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parsing-escape-codes-complexity" class="md-nav__link">
    <span class="md-ellipsis">
      Parsing escape codes complexity
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conflicts-ascii-and-ibm-code-pages" class="md-nav__link">
    <span class="md-ellipsis">
      Conflicts, ASCII and IBM code pages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#switch-conditionals-and-a-lot-of-loops" class="md-nav__link">
    <span class="md-ellipsis">
      Switch conditionals and a lot of loops
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#text-characters-and-pattern-matching" class="md-nav__link">
    <span class="md-ellipsis">
      Text characters and pattern matching
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#there-are-no-magic-numbers" class="md-nav__link">
    <span class="md-ellipsis">
      There are no magic numbers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#idiomatic-text-elements" class="md-nav__link">
    <span class="md-ellipsis">
      Idiomatic text elements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-preference-for-reference-over-of-primitive-types" class="md-nav__link">
    <span class="md-ellipsis">
      The preference for reference over of primitive types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objects-vs-arrays" class="md-nav__link">
    <span class="md-ellipsis">
      Objects vs arrays
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#do-not-combine-reference-types-with-primitive-types-in-large-sets" class="md-nav__link">
    <span class="md-ellipsis">
      Do not combine reference types with primitive types in large sets
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  



  
  


<h1 id="program-patterns">Program patterns</h1>
<h2 id="code-encoding">Code encoding</h2>
<p>All web extension code, including JS, CSS, and HTML, should be encoded as <strong>UTF-8</strong> using Unix-style <strong>LF</strong> (line-feed) newline controls.</p>
<h2 id="parsing-escape-codes-complexity">Parsing escape codes complexity</h2>
<p>The terms <em>ANSI escape codes</em> or <em>sequences</em> get given to plain text documents embedded with special terminal text stylizations and controls. Long formalized into several technical standards such as ANSI X3.64, <a href="https://www.iso.org/obp/ui/#iso:std:iso-iec:6429:ed-3:v1:en">ISO/IEC 6429</a>, and <a href="https://ecma-international.org/publications-and-standards/standards/ecma-48/">EMCA-48</a>, they are commonly but inaccurately referred to as <q><a href="https://blog.ansi.org/2019/10/ansi-art-ascii-art-iso-standards-x3-64/">ANSI text</a></q>.</p>
<p>The ANSI escape paradigm originates from the 1970s in a very different computing landscape when file and memory size reduction trumped usability. Unlike modern HTML syntax, there is no identifier to finish or close text stylizations or formatting changes.</p>
<p>Instead, when parsing text, one must look ahead through the code for control modifiers that affect the existing stylizations. Unfortunately, these closing modifiers may be deep within the text document or not provided.</p>
<p>For example, in HTML, you wrap the bold text around a pair of <code>&lt;strong&gt;&lt;/strong&gt;</code> tags. In markdown, the same boldness can be done using a set of <code>__</code> or <code>**</code> characters.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>This is bold text<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>This is strong <span class="p">&lt;</span><span class="nt">em</span><span class="p">&gt;</span>and stresses emphasis<span class="p">&lt;/</span><span class="nt">em</span><span class="p">&gt;&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>HTML can be <span class="p">&lt;</span><span class="nt">span</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;color: red;&quot;</span><span class="p">&gt;</span>red<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>,
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="p">&lt;</span><span class="nt">span</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;color: green;&quot;</span><span class="p">&gt;</span>green<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>,
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>or <span class="p">&lt;</span><span class="nt">span</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;color: yellow;&quot;</span><span class="p">&gt;</span>yellow<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>.
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="gs">__This is bold text__</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="gs">**This is bold text**</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="ge">_This is italicized text_</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>___This is bold and italicized text___
</code></pre></div>
<p>But for <small>(ANSI)</small> escape-encoded text, the escape code value <code>1</code> is used to toggle <q>bold</q> text. This style must remain active until one of the following escape code values are found:</p>
<ul>
<li><code>0</code> for the <q>reset/normal</q> font toggle</li>
<li><code>22</code> for the <q>bold off</q> toggle</li>
<li><code>23</code> for the <q>normal intensity</q> toggle</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>This is \e[1mbold text\e[0m
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>This \e[3mitalicizes text which continues through the next lines
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>This is also \e[1mbold text\e[22m
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>And this is \e[1mbold text\e[23m, but
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>then\e[0m this resets all text.
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>Escape codes can be \e[31mred\e[0m, \e[32mgreen\e[0m, or \e[33myellow\e[0m.
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>And multiple \e[1;31;47mstyles\e[0m can be combined.
</code></pre></div>
<p>Because of this complexity, the code uses a JS class object named <a href="https://github.com/bengarrett/RetroTxt/blob/main/ext/scripts/parse_ansi.js#L326">SGR</a> (<a href="https://vt100.net/docs/vt510-rm/SGR.html">select or set graphic rendition</a>) to keep track of the active font and style toggles while parsing the escape-encoded document. The JS object has over a dozen boolean properties to track the various text styles, some integer properties for the foreground and background, 16-color values, and a pair of strings for hexadecimal RGB color codes.</p>
<p><a href="https://gist.github.com/sindresorhus/bed863fb8bedf023b833c88c322e44f9">RGB color codes</a> are not part of the ANSI standard but are in some text artworks and are used by various applications. An RGB foreground or background color value will always override a previous 16 or 256-color value until a normal/reset control code (<code>\e[0m</code>) is used.</p>
<p>One key functionality of the standard is controlling the <a href="https://man7.org/linux/man-pages/man4/console_codes.4.html">cursor position</a>. Much like a modern text editor, you could use the controls to move the text input cursor up or down, left or right, to then apply additional text or styles to the new screen position.</p>
<p>Unfortunately, HTML does not replicate this type of functionality at all. While it could be possible to track such positioning using JS and the Document Object Model in the browser, it would be needlessly complex and time-consuming for little reward. The typical use case for cursor movement was text art and animations from the early 1990s created for <a href="https://www.computerhope.com/jargon/b/bbs.htm">Bulletin Board Systems</a>. However, these texts are better suited to read in a fixed-size ANSI editor, viewer, or terminal app than a web browser.</p>
<p>The code uses a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/br">line-break HTML element</a> to support the cursor's down positioning and forward (<code>→</code> right movement) by injecting space characters for each forward value and <code>↓</code> down position. But there is no intention to support the back (<code>←</code> left movement) and <code>↑</code> up positioning controls.</p>
<h2 id="conflicts-ascii-and-ibm-code-pages">Conflicts, ASCII and IBM code pages</h2>
<p>The 256 codepoint <a href="https://en.wikipedia.org/wiki/Code_page_437">Code page 437</a> was the primary text encoding for <a href="https://www.ibm.com/history/personal-computer">personal computers</a> in the USA and Canada during the 1980s and early 1990s. However, CP-437 is incompatible with the universal <a href="https://developer.mozilla.org/en-US/docs/Glossary/ASCII">ASCII text encoding</a> and the <a href="https://developer.mozilla.org/en-US/docs/Glossary/Unicode">Unicode encoding</a>.</p>
<p>The first 32 <a href="https://en.wikipedia.org/wiki/Code_point">code points</a> (<code>0x00-0x1F</code>) of CP-437 contain display characters, while in ASCII and Unicode, these are control codes. For the applications using the legacy CP-437, it was up to the software to decide whether to display characters or obey an ASCII control code.</p>
<p>For example, in <a href="https://www.britannica.com/technology/MS-DOS">MS-DOS</a>, the primary PC operating system in the 1980s, code point 26 (<code>0x1A</code>) can display a right arrow <code>→</code> or a marker to signal the end-of-document.</p>
<p>For another example, code point 13 (<code>0x0D</code>) is usually a newline carriage return, but with CP-437, it can be the musical note <code>♪</code>.</p>
<p>Whenever IBM CP-437 or other IBM codepages are detected, the RetroTxt code will generally obey the everyday control codes shown below, but otherwise, it displays the characters from the IBM codepage.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>Code point 0x08, &quot;◘&quot; is always a backspace control
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>Code point 0x09, &quot;○&quot; is always a horizontal tab
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>Code point 0x13, &quot;♪&quot; is always carriage return
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>Code point 0x1A, &quot;→&quot; is treaded as an end of file marker
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>Code point 0x7F, &quot;⌂&quot; is always a delete control
</code></pre></div>
<h2 id="switch-conditionals-and-a-lot-of-loops">Switch conditionals and a lot of loops</h2>
<p>When conceiving the initial code, I targeted the new ES6 (<a href="http://es6-features.org/">ECMAScript 2015</a>). Unfortunately, this standard set lacked an equivalent to a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Regular_expressions/Lookbehind_assertion">regex look-behind assertion</a> feature, so the code had to implement opaque multiple-loop switch conditionals to pattern match for control modifiers within the text document.</p>
<p>At the time, switch statements were the most performant conditional pattern for the Chromium <a href="https://v8.dev/">V8&nbsp;JavaScript&nbsp;engine</a>, thanks to byte code conversion.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1">// CUU, CUD, CUF, CUB - Cursor Up, Down, Forward, Back</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">digit</span><span class="p">.</span><span class="nx">_0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="kc">true</span><span class="o">:</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">digit</span><span class="p">.</span><span class="nx">_1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="kc">true</span><span class="o">:</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">        </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">digit</span><span class="p">.</span><span class="nx">_2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">          </span><span class="k">case</span><span class="w"> </span><span class="kc">true</span><span class="o">:</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">            </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">digit</span><span class="p">.</span><span class="nx">_3</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">              </span><span class="k">case</span><span class="w"> </span><span class="kc">true</span><span class="o">:</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_cursorCode</span><span class="p">(</span><span class="nx">peak</span><span class="p">.</span><span class="nx">_4</span><span class="p">))</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">                  </span><span class="c1">// ←[1523A move thousands of places</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">                  </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">_cursorMove</span><span class="p">(</span><span class="nx">peak</span><span class="p">.</span><span class="nx">_4</span><span class="p">,</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">                    </span><span class="nx">peak</span><span class="p">.</span><span class="nx">_0</span><span class="p">,</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="w">                    </span><span class="nx">peak</span><span class="p">.</span><span class="nx">_1</span><span class="p">,</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">                    </span><span class="nx">peak</span><span class="p">.</span><span class="nx">_2</span><span class="p">,</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="w">                    </span><span class="nx">peak</span><span class="p">.</span><span class="nx">_3</span><span class="p">,</span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="w">                  </span><span class="p">])</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="w">                </span><span class="k">break</span>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="w">              </span><span class="k">default</span><span class="o">:</span>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="w">                </span><span class="p">...</span>
</code></pre></div>
<h2 id="text-characters-and-pattern-matching">Text characters and pattern matching</h2>
<p>The code uses strings instead integer arrays, even though most ANSI and legacy text interpretators historically would be hexadecimal or binary. But in browsers, the documents are loaded in as <a href="https://unicode.org/faq/utf_bom.html">UTF-16</a> text, so conversion to integer values for parsing and back again as text for display seems unnecessary.</p>
<p>As a bonus, text-based pattern matching is more readable than character and control code values.</p>
<h2 id="there-are-no-magic-numbers">There are no magic numbers</h2>
<p>When dealing with legacy text standards, it is easy to fall into the trap of using hexadecimal or decimal codes as value representations which have no meaning without additional documentation. Code should always be readable without needing conversion tables or assumed knowledge.</p>
<p>For example, using a symbol named <code>ESC</code> or <code>escape</code> is far more meaningful than providing the hexadecimal value <code>0x1B</code> or the integer <code>27</code> value out of context.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">escape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">27</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="kr">char</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">escape</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">  </span><span class="p">...</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="p">}</span>
</code></pre></div>
<h2 id="classes">Classes</h2>
<p>JS classes are used throughout the code except for some helper and local functions.
They are templates for creating readable objects with more accessible naming options.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1">// An example of a class object in use</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">ansi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Controls</span><span class="p">()</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="nx">ansi</span><span class="p">.</span><span class="nx">parse</span><span class="p">()</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;counts, columns: &quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">ansi</span><span class="p">.</span><span class="nx">columns</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;rows: &quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">ansi</span><span class="p">.</span><span class="nx">rows</span><span class="p">)</span>
</code></pre></div>
<h2 id="idiomatic-text-elements">Idiomatic text elements</h2>
<p>The HTML idiomatic element applies CSS classes and styles to the text on the page. The code parses through the original text and escape controls, then uses the browser DOM to generate a new body element on the page, filled with idiomatic elements and text characters. The idiomatic approach seemed most appropriate and reduced the overall markup size.</p>
<blockquote>
<p>The <code>&lt;i&gt;</code> HTML element represents a range of text that is set off from the normal text for some reason, such as idiomatic text, technical terms, taxonomical designations, among others. Historically, these have been presented using italicized type, which is the original source of the <code>&lt;i&gt;</code> naming of this element.</p>
</blockquote>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/i">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/i</a></li>
</ul>
<h2 id="the-preference-for-reference-over-of-primitive-types">The preference for reference over of primitive types</h2>
<p>When ES6 was new and the code conceived, the Chromium V8 JavaScript engine was optimized for reference types over primitive types.
But this has since changed, and the engine uses a more balanced approach. However, the code still uses reference types for most of the data.</p>
<blockquote>
<p>Copying and accessing JS reference types, such as arrays and objects, can use far less memory than simple types, such as long strings or integers. When passing data using simple types, the data gets duplicated or modified instead of referenced.</p>
</blockquote>
<h2 id="objects-vs-arrays">Objects vs arrays</h2>
<p>During code design in the days of ES6, the JS community believed that objects were more memory efficient than arrays, so several array constructors, such as <code>Uint8Array</code>, were skipped. However, this disparity is not relevant today.</p>
<h2 id="do-not-combine-reference-types-with-primitive-types-in-large-sets">Do not combine reference types with primitive types in large sets</h2>
<p>Referenced value types such as  <code>undefined</code> or <code>null</code> should never be mixed with simple values as <a href="https://ponyfoo.com/articles/javascript-performance-pitfalls-v8#take-away-from-this-section">they cause a performance hit</a>.</p>
<p>An array with exclusive <strong>number</strong> elements should only use <code>-1</code> or <code>NaN</code> for the absence of a value.</p>
<p>An array with exclusive <strong>string</strong> elements should only use `` as empty values.</p>







  
  




  



                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      RetroTxt &copy; 2022-24 Ben Garrett
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>